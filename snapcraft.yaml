name: opennms-minion
base: core18
version: '25.1.1'
summary: OpenNMS Horizon Minion application for distributed monitoring
description: |
  OpenNMS Horizon is an enteprise grad open source network monitoring tool. The 
  Minion is the distributed network monitoring component allowing monitoring of
  isolated network areas which can't be reached from a central OpenNMS Horizon
  instance.

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots

parts:
  opennms-minion:
    plugin: dump
    source: https://github.com/OpenNMS/opennms/releases/download/opennms-$SNAPCRAFT_PROJECT_VERSION-1/minion-$SNAPCRAFT_PROJECT_VERSION.tar.gz
    source-checksum: sha256/4d0790b80b64ccd0be6737ea308974db96a42c511e2b1a3653030088b48b174a
    organize:
      "*": opennms-minion
    stage-packages:
      - openjdk-11-jdk-headless

apps:
  opennms-minion:
    command: opennms-minion/bin/karaf server
