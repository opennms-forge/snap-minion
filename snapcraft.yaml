name: opennms-minion
base: core18
version: '25.1.1'
summary: OpenNMS Horizon Minion application for distributed monitoring
description: |
  OpenNMS Horizon is an enteprise grad open source network monitoring tool. The 
  Minion is the distributed network monitoring component allows monitoring of
  isolated network areas which can't be reached from a central OpenNMS Horizon
  instance.

grade: devel # must be 'stable' to release into candidate/stable channels
confinement: devmode # use 'strict' once you have the right plugs and slots

architectures:
  - build-on: amd64
    run-on: amd64

parts:
  minion:
    plugin: dump
    #source: https://github.com/OpenNMS/opennms/releases/download/opennms-$SNAPCRAFT_PROJECT_VERSION-1/minion-$SNAPCRAFT_PROJECT_VERSION.tar.gz
    source: http://mirror.labmonkeys.de/minion-25.1.1.tar.gz
    source-checksum: sha512/d12d3fb6b535f8de07b61c554b6edfef89143e7ee5ba9cd9f4b8a89fe6eb3f2e161829c4ac8031af0661d4c21079256ed6a5a52cbd63f41357da1559e6e316c3
    stage-packages:
      - openjdk-11-jdk-headless
    organize:
      '*': opt/minion

apps:
  minion:
    command: bin/karaf server
